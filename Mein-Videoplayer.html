<!DOCTYPE html>
<html>
<head>
<title>Mein Videoplayer | PrivateProjects</title>
<meta charset="UTF-8">
<meta name="author" content="Dennis Jungbauer">
<meta name="webdesigner" content="Dennis Jungbauer">
<meta name="Editor" content="Notepad++">
<link rel="shortcut icon" type="image/x-icon" href="../../img/video.ico">
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<style>
	@import url(http://fonts.googleapis.com/css?family=Open+Sans);

	body {
		width: 100%;
		height: 100%;
		margin: 0;
		padding: 0;
		background: #242424;
		background: -moz-linear-gradient(left, #0C0D0D 0%, #333 50%, #0C0D0D 100%);
		background: -webkit-linear-gradient(left, #0C0D0D 0%, #333 50%, #0C0D0D 100%);
		background: -ms-linear-gradient(left, #0C0D0D 0%, #333 50%, #0C0D0D 100%);
		background: linear-gradient(to right, #0C0D0D 0%, #333 50%, #0C0D0D 100%);
		-khtml-user-select: none;
		-moz-user-select:none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}
	#hintergrund {
		display: none;
		width: 100%;
		height: auto;
		position: fixed;
		z-index: 1;
		border: none;
	}
	#content {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		z-index: 2;
	}
	a { color: dodgerblue; text-decoration: none; }
	a:hover { color: royalblue; }
	div#video-box {
		position: absolute;
		left: 50%;
		top: 50%;
		margin-left: -320px;  /* hälfte vom div */
		margin-top: -230px;  /* hälfte vom div (video + padding) und 34px weniger */
		background: black;
		border: 4px solid black;
		border-width: 1em 4px;
		box-shadow: 0px 1px 10px 2px #666;
        overflow: hidden;
	}
	#video-player video {
        display: block;  /* fix for this little padding on the parent div */
        width: 640px;
        height: 360px;
		border-bottom: thin solid #111;
		opacity: 0.88;
		transition: opacity 160ms ease-in-out;
	}
	#video-player.fullscreen video {
		position: fixed;
		height: 100%;
		width: 100%;
		left: 0;
		top: 0;
		box-shadow: inset 0 -5px 45px 5px black;
	}
	#video-title {
		position: absolute;
		z-index: 2;
		top: 0;
		left: 0;
		right: 0;
		padding: 3px 8px;
		background: rgba(18,18,18,0.77);
		font-family: 'Open Sans', sans-serif;
		color: #d0d0d0;
		/*transition: opacity 0.2s;*/
	}
	.fullscreen #video-title {
        position: fixed;
        padding: 8px 10px;
        text-align: center;
    }
	#playArea {
		position: absolute;
		z-index: 1;
		width: 100%;
		top: 0;
		left: 0;
		bottom: 0;
	}
	.fullscreen #playArea { position: fixed; }
	#video-controls {
		position: absolute;
		z-index: 3;
		height: 24px;
		bottom: 0;
		left: 0;
		right: 0;
		padding: 7px 13px;
		overflow: hidden;
		background: rgba(12,12,12,0.88);
		box-shadow: 0 -2px 8px -1px rgba(12,12,12,0.88);
		cursor: default;
	}
	.fullscreen #video-controls { position: fixed; margin: auto; text-align: center; }
    .fullscreen #playArea, .fullscreen #video-controls { bottom: 12px; }
	#video-controls * { vertical-align: middle; }
	#video-controls .fa {
		font-size: 24px;
		line-height: 24px;
		color: #E0E0E0;
		transition: all 180ms ease-out;
	}
    #video-controls .fa.disabled { color: rgb(76, 75, 80); }
    #video-controls .fa:not(.disabled) { cursor: pointer; }
	#video-controls .fa:not(.disabled):hover { color: white; text-shadow: 0 0 6px rgba(240,242,244,0.77); }
	#video-controls span { font: 12px 'Open Sans'; color: #CCC; }
	input[type="range"] {
		-webkit-appearance: none;
		appearance: none;
		height: 7px;
		margin: 4px;
		background-color: #C3C2C5;
		border-radius: 3px;
		outline: none;
	}
	input[type="range"]::-webkit-slider-thumb {
		-webkit-appearance: none;
		appearance: none;
		width: 14px;
		height: 14px;
		background-color: #EEE;
		border-radius: 50%;
		box-shadow: 0 0 4px 1px rgba(0,0,0,0.3);
	}
	
	#video-controls #play { font-size: 22px; width: 19px; }
	#currentT { margin-left: 6px; }
	#timeline { margin: 8px 3px 8px 2px; width: 40%; }
	#duration { margin-right: 12px; }
	#video-controls #volume-down { width: 14px; }
	input#volume { margin: 8px 4px; width: 21.5%; }
	#video-controls #fullscreen { margin-left: 10px; height: 21px; font-size: 22px; }
	#video-controls #hdtoggle {
		font: italic 11px 'Arial Black' !important;
		border: 2px solid #E0E0E0;
		padding: 0 6px 0 5px;
		border-radius: 4px;
	}
    #video-controls #hdtoggle.disabled { border-color: rgb(91, 90, 95); }
	#video-controls #hdtoggle:not(.disabled):hover {
		border-color: white;
		box-shadow: 0 0 6px rgba(236,238,240,0.6), inset 0 0 5px rgba(238,240,242,0.7);
	}
	#video-controls #hdtoggle.active { color: deepskyblue; }
	
	p.info { font: 16px Georgia; color: #AAA; letter-spacing: 0.7px; line-height: 1.4em; padding: 4px 1em; text-shadow: 3px -3px 6px #999; }

	@media (min-height: 500px) {
		body { overflow-y: hidden; }
	}
</style>
<script src="../../date.js"></script>
<script>
    // jQuery plugin to bind both single and double click to objects
    // parameter 'delegateSelector' is optional and allow to delegate the events
    // parameter 'dblclickWait' is optional, default is 300
    (function($) {
        $.fn.multipleClicks = function(delegateSelector, clickFun, dblclickFun, dblclickWait) {
            var obj;
            if (typeof(delegateSelector)==='function' && typeof(clickFun)==='function') {
                dblclickWait = dblclickFun; dblclickFun = clickFun; clickFun = delegateSelector; delegateSelector = null; // If 'delegateSelector' is missing reorder arguments
            } else if (!(typeof(delegateSelector)==='string' && typeof(clickFun)==='function' && typeof(dblclickFun)==='function')) {
                return false;
            }
            return $(this).each(function() {
                $(this).on('click', delegateSelector, function(event) {
                    var self = this;
                    clicks = ($(self).data('clicks') || 0)+1;
                    $(self).data('clicks', clicks);
                    if (clicks == 1) {
                        setTimeout(function(){
                            if ($(self).data('clicks') == 1) {
                                clickFun.call(self, event); // Single click action
                            } else {
                                dblclickFun.call(self, event); // Double click action
                            }
                            $(self).data('clicks', 0);
                        }, dblclickWait || 300);
                    }
                });
            });
        };
    })(jQuery);
</script>
<script>
    function titleCase(str) {
        return (str + '').replace(/^([a-z])|\s+([a-z])/g, function ($1) {
            return $1.toUpperCase();
        });
    }
    var cursorTimer;
    function cursorShowTimeout(time) {
        if(video.get(0).played.length!=0 && !video.get(0).ended) {
            clearInterval(cursorTimer);
            if($('#playArea').css("cursor")) $('#playArea').css("cursor", "");

            cursorTimer = setTimeout(function() {
                $('#playArea').css("cursor", "none");
            }, time);
        }
    }
    function hoverEffect() {
        $('#video-player').hover(function() {
            //$(video).css("opacity", "1");
            var bottom = $('#video-player').hasClass("fullscreen") ? 12 : 0;
            $('#video-controls').stop(true).animate({bottom: bottom}, 120);
            //$('#video-title').fadeIn(100);
        }, function() {
            if (! video.get(0).ended) {
                $('#video-controls').stop(true, true).delay(550).animate({bottom: -$('#video-controls').outerHeight() -5}, 750);
                //$('#video-title').fadeOut(220);
            }
        });
    }
    function showTimes() {
        dur = video.get(0).duration;
        var timeString = new Date(dur * 1000).toString('m:ss').replace('NaN:NaN', '0:00');
        $('#duration').html(timeString);
        times = setInterval(function() {
            pos = video.get(0).currentTime;
            var timeString = new Date(pos * 1000).toString('m:ss');
            $('#currentT').html(timeString);
        }, 500);
    }
    function initTimeline() {
        timeline = setInterval(function() {
            pos = video.get(0).currentTime;
            var value = pos * (100 / dur);
            $('#timeline').val(value);
        }, 250);
    }
    function replayVideo() {
        replay = setInterval(function() {
            if (video[0].ended) {
                if($('#playArea').css("cursor")) $('#playArea').css("cursor", "");
                var bottom = $('#video-player').hasClass("fullscreen") ? 12 : 0;
                $('#video-controls').stop(true).animate({bottom: bottom}, 120);
                $('#play').removeClass("fa-pause").addClass("fa-repeat");
                $('#video-title').fadeIn(120);
                video.currentTime = 0;
            }
        }, 400);
    }
    function setVolume(vol) {
        vol = vol || $('#volume').val();
        video.get(0).volume = vol;
        $('#volume').val(vol);
    }
    function playVideo() {
        setTimeout(function() {
            if (video.get(0).readyState==0 && !video.seeking) {
                var url = prompt("The video is not reachable.\nTo load another video paste the URL here:", video.attr("src"));
                if(url != null) {
                    video.attr("src", url);
                    setTimeout('playVideo()', 500);
                }
                return false;
            }
        }, 1250);
        setVolume();
        hoverEffect();

        if (video.get(0).paused) {
            showTimes();
            initTimeline();
            replayVideo();
            video.get(0).play();
            $('#play').removeClass("fa-play").addClass("fa-pause");
            //$('#video-controls').stop().delay(500).slideUp(400);
            $('#video-title').delay(300).fadeOut(300);
            video.css("opacity", "1");

            if($('#playArea').css("cursor")!="none") setTimeout(function() {
                $('#playArea').css("cursor", "none");
            }, 1500);
        }
        else {
            video.get(0).pause();
            clearInterval(timeline);
            clearInterval(times);
            clearInterval(replay);
            $('#play').removeClass("fa-pause").addClass("fa-play");
            $('#video-title').fadeIn(120);
        }
        return false;
    }
    function muteVideo() {
        video.prop('muted', !video.prop('muted'));
        if(video.prop('muted')) {
            $('#volume-down').removeClass("fa-volume-down").addClass("fa-volume-off");
            $('#volume').val(0);
        }
        else {
            $('#volume-down').removeClass("fa-volume-off").addClass("fa-volume-down");
            $('#volume').val( video.get(0).volume );
        }
    }
    function showFullscreen(requestFS) {
        requestFS = (typeof requestFS !== "undefined") ? requestFS : true;
        var vPlayer = $('#video-player');
        $('#video-controls').removeAttr("style");
        if(!vPlayer.hasClass("fullscreen") || (requestFS && !isFS)) {
            vPlayer.addClass("fullscreen");
            $('#video-box').css("position", "initial");
            if(typeof title!=="undefined") $('#video-title').text(title);

            if(requestFS) {
                if (vPlayer.get(0).requestFullscreen) {
                    vPlayer.get(0).requestFullscreen();
                } else if (vPlayer.get(0).msRequestFullscreen) {
                    vPlayer.get(0).msRequestFullscreen();
                } else if (vPlayer.get(0).mozRequestFullScreen) {
                    vPlayer.get(0).mozRequestFullScreen();
                } else if (vPlayer.get(0).webkitRequestFullscreen) {
                    vPlayer.get(0).webkitRequestFullscreen();
                }
                setTimeout(function() {
                    $('#fullscreen').addClass("fa-rotate-180");
                }, 300);
            }
        }
        else {
            if(requestFS) {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                } else if (document.mozCancelFullScreen) {
                    document.mozCancelFullScreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                }
                setTimeout(function() {
                    $('#fullscreen').removeClass("fa-rotate-180");
                }, 200);
            }

            $('#video-box').removeAttr("style");
            vPlayer.removeClass("fullscreen");
            if(typeof shortTitle!=="undefined") $('#video-title').text(shortTitle);
        }
        isFS = (document.fullscreenElement!=null || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement);
    }


    $(document).ready(function() {
        $('video').get(0).controls = false;
        video = $('video').eq(0);
        if($('#video-title').is(':empty')) {
            title = video.attr("src").split("/");
            title = title[title.length-1].replace(/(_|-)|(\.[^.\s]{3,4}$)/g, " ").replace(/([12347]\d{2,3}p|\s(Full\s?)?HD(?![^0-9\s\-]))/g, "");  //binde- und unterstriche ersetzen, dateiendung & qualität entf
            title = titleCase(title);
            if(title.length > 55) {
                shortTitle = title.substr(0,54) + "...";
                $('#video-title').text(shortTitle);  //titel bei über 59 zeichen kürzen
            } else $('#video-title').text(title);
        }
        if($('#hd-source').length) video.data("sd-src", video.attr("src"));
        else $('#hdtoggle').addClass("disabled").attr("title", "Not available");
        isFS = (document.fullscreenElement!=null || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement);

        $('#hintergrund').load(function() {
            $(this).fadeIn(600);
        });


        $('#playArea').multipleClicks(function() {
            playVideo();
        }, function() {
            if(!isFS) showFullscreen(false);
        }, 250);

        $('#playArea').bind('mousemove', function(){
            cursorShowTimeout(1500);
        }).mousedown(function(e) {
            $('#playArea').unbind("mousemove");
        }).mouseup(function() {
            setTimeout(function() {
                $('#playArea').bind("mousemove", function() {
                    cursorShowTimeout(1500);
                });
            }, 10);
        }).mouseout(function(){ $('#playArea').css("cursor", ""); });

        $(document).keyup(function(e) {
            if(e.keyCode==32) { e.preventDefault(); playVideo(); }  //bei Leertaste abspielen/pausieren
            if(e.which==27 && $('#video-player').hasClass("fullscreen")) {  //bei ESC Vollbild beenden
                showFullscreen(false);
                setTimeout(function() {
                    $('#fullscreen').removeClass("fa-rotate-180");
                }, 200);
            }
        });

        $('#timeline').mousedown(function() {
            clearInterval(timeline);
        }).mouseup(function() {
            var timePercentage = $('#timeline').val() /100;
            video.get(0).currentTime = video.get(0).duration *timePercentage;
            initTimeline();
            //fix for current time
            pos = video.get(0).currentTime;
            var timeString = new Date(pos * 1000).toString('m:ss');
            $('#currentT').html(timeString);
        });

        $('#volume').click(function() {  //Lautstärke einstellen, auch während dem Schieben des Reglers
            setVolume();
        }).mousedown(function() {
            $(this).mousemove(function() {
                setVolume();
            });
        }).mouseup(function() {
            $(this).unbind("mousemove");
        });

        $('#hdtoggle').click(function() {
            var hd = ($('#hd-source').length) ? $('#hd-source').val() : false;
            if(hd) {
                var position = video[0].currentTime;
                var wasPlaying = !video[0].paused;
                var sd = video.data("sd-src");
                if(video.attr("src") != hd) {
                    video.attr("src", hd);
                    $(this).addClass("active");
                } else {
                    video.attr("src", sd);
                    $(this).removeClass("active");
                }
                setTimeout(function() {
                    video[0].currentTime = position;
                    if(wasPlaying) setTimeout('playVideo();', 400);
                }, 200);
            }
        });

        /*$('#quality span').each(function() {
         $(this).click(function() {
         changeQuality( $(this).html() );
         });
         });*/
    });
</script>
</head>
<body>
<img id="hintergrund" src="../../img/theater-ambient.jpg" alt="Hintergrundbild">
<div id="content">
	<div id="video-box">
		<div id="video-player">
			<div id="video-title"></div>
			<div id="playArea">&nbsp;</div>
			<div id="video-controls">
				<i id="play" class="fa fa-play fa-fw" onclick="playVideo()"></i>
				<span id="currentT">0:00</span>
				<input id="timeline" type="range" value="0.0" min="0.0" max="100.0" step="0.1">
				<span id="duration">0:00</span>
				<i id="volume-down" class="fa fa-volume-down" onclick="muteVideo()"></i>
				<input id="volume" type="range" value="0.25" min="0" max="1" step="0.01">
				<i class="fa fa-volume-up" onclick="setVolume(1)"></i>
				<i id="fullscreen" class="fa fa-external-link" onclick="showFullscreen()"></i>&nbsp;
				<i id="hdtoggle" class="fa">HD</i>
			</div>
            <input type="hidden" id="hd-source" value="Videoplayer/sintel_trailer-720p.mp4">
			<video src="Videoplayer/sintel_trailer-480p.mp4" poster="http://media.w3.org/2010/05/sintel/poster.png" controls>
				<p class="info">Ups! Dein Browser scheint kein HTML5 zu unterst&uuml;tzen.<br>Du solltest deinen Browser ein Update g&ouml;nnen ;)</p>
				<p class="info">Jedoch kannst du dir auch jetzt schon das Video <a href="https://www.youtube.com/watch?v=XSGBVzeBUbk">&thinsp;auf
					YouTube&thinsp;<i class="fa fa-youtube-play" style="text-shadow: none"></i>&thinsp;</a> anschauen&thinsp;...</p>
			</video>
		</div>
	</div>
</div>
</body>
</html>